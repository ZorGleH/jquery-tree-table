(function(d){var b;d.fn.treeTable=function(f){b=d.extend({},d.fn.treeTable.defaults,f);return this.each(function(){d(this).find("tbody tr").each(function(){a(d(this))})})};d.fn.treeTable.defaults={dataAttribute:"level",collapsedByDefault:true,ignoreClickOn:"input, a"};d.fn.collapse=function(){if(d(this).hasChildren()){d(this).removeClass("expanded").addClass("collapsed");e(d(this)).each(function(){d(this).hide().collapse()})}return this};d.fn.expand=function(){if(d(this).hasChildren()){d(this).removeClass("collapsed").addClass("expanded");e(d(this)).each(function(){d(this).show()})}return this};d.fn.hasChildren=function(){return(e(d(this)).length>0)};d.fn.toggle=function(){if(d(this).hasClass("collapsed")){d(this).expand()}else{d(this).collapse()}return this};function a(f){if(f.hasChildren()){f.click(function(h){var g=d(h.target);if(!g.is(b.ignoreClickOn)){f.toggle();return false}});if(b.collapsedByDefault){f.collapse()}else{f.expand()}}}function c(f){return parseInt(d(f).data(b.dataAttribute))}function e(f){nodeLevel=c(f);childrenLevel=nodeLevel+1;return d(f).nextUntil("tr[data-"+b.dataAttribute+"="+nodeLevel+"]","tr[data-"+b.dataAttribute+"="+childrenLevel+"]")}})(jQuery);